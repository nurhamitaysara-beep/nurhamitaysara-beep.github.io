<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TilGo - Қазақша English үйрену жүйесі</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #005EB8; /* 哈萨克蓝 */
            --secondary: #00478F;
            --accent: #FFD600; /* 太阳黄 */
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4ade80;
            --warning: #facc15;
            --danger: #f87171;
            --gray: #6c757d;
            --card-bg: #ffffff;
            --shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* 头部样式 */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .logo i {
            color: var(--accent);
        }
        
        .user-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .level-selector {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 20px;
            padding: 5px 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .level-selector:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .language-selector {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 20px;
            padding: 5px 10px;
            font-size: 0.9rem;
        }
        
        .language-selector select {
            background: transparent;
            border: none;
            color: white;
            font-weight: 600;
            cursor: pointer;
        }
        
        .language-selector select:focus {
            outline: none;
        }
        
        /* 主要内容区域 */
        main {
            padding: 30px 0;
        }
        
        .hero {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .hero h2 {
            font-size: 1.8rem;
            margin: 15px 0;
            color: var(--accent);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 25px;
            opacity: 0.9;
        }
        
        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--accent);
            color: var(--dark);
        }
        
        .btn-primary:hover {
            background: #e6c000;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 214, 0, 0.4);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }
        
        .btn-outline:hover {
            background: rgba(255,255,255,0.1);
        }
        
        /* 分级选择卡片 */
        .level-section {
            margin-bottom: 40px;
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: var(--secondary);
            font-size: 1.8rem;
        }
        
        .levels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .level-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .level-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        }
        
        .level-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .level-title {
            font-size: 1.4rem;
            margin-bottom: 5px;
        }
        
        .level-desc {
            opacity: 0.9;
            font-size: 0.95rem;
        }
        
        .level-stats {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid #eee;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        .level-actions {
            padding: 15px 20px;
            display: flex;
            gap: 10px;
        }
        
        /* 学习模式区域 */
        .learning-section {
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 40px;
        }
        
        .learning-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--accent), #e6c000);
            color: var(--dark);
        }
        
        .learning-content {
            padding: 25px;
        }
        
        .mode-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px;
            border-radius: 10px;
            background: #e9ecef;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .mode-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 94, 184, 0.3);
        }
        
        .mode-btn i {
            font-size: 1.4rem;
        }
        
        /* 单词学习卡片 */
        .word-card {
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 30px;
            text-align: center;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: all 0.4s;
        }
        
        .word-main {
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
            min-height: 60px;
        }
        
        .pronunciation {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .pronunciation-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 30px;
            font-size: 1.1rem;
        }
        
        .pronunciation-btn {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .translation {
            font-size: 1.4rem;
            color: #e63946;
            margin: 15px 0;
            min-height: 30px;
        }
        
        .part-of-speech {
            background: #e9ecef;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .example {
            font-style: italic;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid var(--primary);
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
            min-height: 50px;
        }
        
        .example-translation {
            color: var(--gray);
            font-size: 1.1rem;
            margin-top: 10px;
        }
        
        .card-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        /* 词库浏览区域 */
        .vocabulary-section {
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 40px;
            display: none;
        }
        
        .vocabulary-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .vocabulary-content {
            padding: 25px;
        }
        
        .vocabulary-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 8px 15px;
            border-radius: 20px;
            background: #e9ecef;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .filter-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
        }
        
        .vocabulary-word {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 4px solid transparent;
        }
        
        .vocabulary-word:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        
        .vocabulary-word.selected {
            border-left-color: var(--primary);
            background: #e6f0ff;
            font-weight: 600;
        }
        
        .vocabulary-word .word {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .vocabulary-word .translation {
            color: #e63946;
            font-size: 0.9rem;
        }
        
        /* 测验区域 */
        .quiz-section {
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 40px;
            display: none;
        }
        
        .quiz-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .quiz-content {
            padding: 25px;
        }
        
        .quiz-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .quiz-type-btn {
            flex: 1;
            min-width: 150px;
            padding: 10px;
            border-radius: 10px;
            background: #e9ecef;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quiz-type-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .quiz-question {
            font-size: 1.4rem;
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        
        .option:hover {
            border-color: var(--primary);
            background: #f0f4ff;
        }
        
        .option.selected {
            border-color: var(--primary);
            background: #e6eeff;
            font-weight: 600;
        }
        
        .option.correct {
            border-color: var(--success);
            background: #e6f7ee;
        }
        
        .option.incorrect {
            border-color: var(--danger);
            background: #fff0f0;
        }
        
        .fill-in-blank {
            display: none;
        }
        
        .fill-in-blank.active {
            display: block;
            margin-bottom: 30px;
        }
        
        .fill-in-blank input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1.2rem;
            margin-top: 15px;
        }
        
        .fill-in-blank input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .spelling-practice {
            display: none;
        }
        
        .spelling-practice.active {
            display: block;
            margin-bottom: 30px;
        }
        
        .spelling-practice .instruction {
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        
        .spelling-practice input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        
        .spelling-practice input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .pronunciation-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .pronunciation-btn-large {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .pronunciation-btn-large:hover {
            background: var(--secondary);
            transform: scale(1.05);
        }
        
        .quiz-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .progress-container {
            flex: 1;
            max-width: 400px;
        }
        
        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: var(--primary);
            border-radius: 5px;
            width: 0%;
            transition: width 0.4s;
        }
        
        /* 错题本区域 */
        .mistakes-section {
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 40px;
            display: none;
        }
        
        .mistakes-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--accent), #e6c000);
            color: var(--dark);
        }
        
        .mistakes-content {
            padding: 25px;
        }
        
        .mistake-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .mistake-word {
            font-weight: 600;
            font-size: 1.2rem;
            color: var(--primary);
        }
        
        .mistake-translation {
            color: #e63946;
        }
        
        .mistake-actions {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.1rem;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: #e9ecef;
            color: var(--primary);
        }
        
        /* 页脚 */
        footer {
            background: var(--dark);
            color: white;
            padding: 30px 0;
            text-align: center;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .footer-logo {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .word-main {
                font-size: 2.2rem;
            }
            
            .mode-selector {
                flex-direction: column;
            }
            
            .mode-btn {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.6rem;
            }
            
            .section-title {
                font-size: 1.4rem;
            }
            
            .word-main {
                font-size: 1.8rem;
            }
            
            .word-card {
                padding: 20px 15px;
            }
        }
        
        /* 动画效果 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate {
            animation: fadeIn 0.5s ease forwards;
        }
        
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        
        /* 哈萨克语特殊样式 */
        .kk, [lang="kk"] {
            font-family: "Noto Sans", "Noto Sans Kazakh", Arial, sans-serif;
        }
        
        /* 俄语特殊样式 */
        .ru, [lang="ru"] {
            font-family: "Noto Sans", "Noto Sans Cyrillic", Arial, sans-serif;
        }
        
        /* 登录模态框样式 */
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        
        .login-modal-content {
            background: white;
            padding: 25px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
        }
        
        .login-modal h3 {
            margin-bottom: 20px;
        }
        
        .login-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .login-modal-close {
            text-align: center;
            margin-top: 20px;
            cursor: pointer;
            color: var(--primary);
        }
    </style>
</head>
<body>
    <!-- 头部导航 -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-language"></i>
                <span>TilGo</span>
            </div>
            <div class="user-controls">
                <div class="level-selector">
                    <i class="fas fa-layer-group"></i> <span class="tr" data-key="current-level">Current Level: High School</span>
                </div>
                <div class="language-selector">
                    <select id="language-select">
                        <option value="en">English</option>
                        <option value="kk">Қазақша</option>
                        <option value="ru">Русский</option>
                        <option value="zh">中文</option>
                    </select>
                </div>
                <button class="btn btn-outline">
                    <i class="fas fa-user"></i> <span class="tr" data-key="login">Login</span>
                </button>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- 英雄区域 -->
        <section class="hero animate">
            <h1><span class="tr" data-key="hero-title">TilGo - Systematic English Learning</span></h1>
            <h2><span class="tr" data-key="hero-subtitle">Language Learning Made Easy! 🌍</span></h2>
            <p><span class="tr" data-key="hero-desc">Scientific word bank + Multiple learning modes + Smart quizzes</span></p>
            <div class="cta-buttons">
                <button class="btn btn-primary" id="start-learning">
                    <i class="fas fa-play-circle"></i> <span class="tr" data-key="start-learning">Start Learning</span>
                </button>
                <button class="btn btn-outline" id="view-quiz">
                    <i class="fas fa-file-alt"></i> <span class="tr" data-key="start-quiz">Start Quiz</span>
                </button>
            </div>
        </section>

        <!-- 分级选择 -->
        <section class="level-section">
            <h2 class="section-title animate"><i class="fas fa-graduation-cap"></i> <span class="tr" data-key="select-level">Select Learning Level</span></h2>
            <div class="levels-grid">
                <!-- 中国教育体系分级 -->
                <div class="level-card animate delay-1" data-level="elementary">
                    <div class="level-header">
                        <h3 class="level-title">Elementary School</h3>
                        <p class="level-desc"><span class="tr" data-key="elem-desc">Basic daily vocabulary for grades 1-6</span></p>
                    </div>
                    <div class="level-stats">
                        <div class="stat">
                            <div class="stat-value">800+</div>
                            <div class="stat-label"><span class="tr" data-key="words">Words</span></div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">A1</div>
                            <div class="stat-label">CEFR</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">1-2 years</div>
                            <div class="stat-label"><span class="tr" data-key="duration">Duration</span></div>
                        </div>
                    </div>
                    <div class="level-actions">
                        <button class="btn btn-primary vocab-btn" style="flex:1;">
                            <i class="fas fa-book"></i> <span class="tr" data-key="view-vocab">View Vocabulary</span>
                        </button>
                        <button class="btn" style="background:#e9ecef; flex:1;">
                            <i class="fas fa-list"></i> <span class="tr" data-key="preview">Preview</span>
                        </button>
                    </div>
                </div>
                
                <div class="level-card animate delay-2" data-level="middle">
                    <div class="level-header" style="background: linear-gradient(135deg, var(--accent), #e6c000);">
                        <h3 class="level-title">Middle School</h3>
                        <p class="level-desc"><span class="tr" data-key="middle-desc">Basic grammar and daily communication</span></p>
                    </div>
                    <div class="level-stats">
                        <div class="stat">
                            <div class="stat-value">1,600+</div>
                            <div class="stat-label"><span class="tr" data-key="words">Words</span></div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">A2</div>
                            <div class="stat-label">CEFR</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">2-3 years</div>
                            <div class="stat-label"><span class="tr" data-key="duration">Duration</span></div>
                        </div>
                    </div>
                    <div class="level-actions">
                        <button class="btn btn-primary vocab-btn" style="flex:1; background:var(--primary); color:white;">
                            <i class="fas fa-book"></i> <span class="tr" data-key="view-vocab">View Vocabulary</span>
                        </button>
                        <button class="btn" style="background:#e9ecef; flex:1;">
                            <i class="fas fa-list"></i> <span class="tr" data-key="preview">Preview</span>
                        </button>
                    </div>
                </div>
                
                <div class="level-card animate delay-3" data-level="high">
                    <div class="level-header" style="background: linear-gradient(135deg, #f72585, #b5179e);">
                        <h3 class="level-title">High School</h3>
                        <p class="level-desc"><span class="tr" data-key="high-desc">Academic and daily comprehensive vocabulary</span></p>
                    </div>
                    <div class="level-stats">
                        <div class="stat">
                            <div class="stat-value">3,500+</div>
                            <div class="stat-label"><span class="tr" data-key="words">Words</span></div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">B1</div>
                            <div class="stat-label">CEFR</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">3-4 years</div>
                            <div class="stat-label"><span class="tr" data-key="duration">Duration</span></div>
                        </div>
                    </div>
                    <div class="level-actions">
                        <button class="btn btn-primary vocab-btn" style="flex:1; background:#f72585; color:white;">
                            <i class="fas fa-book"></i> <span class="tr" data-key="view-vocab">View Vocabulary</span>
                        </button>
                        <button class="btn" style="background:#e9ecef; flex:1;">
                            <i class="fas fa-list"></i> <span class="tr" data-key="preview">Preview</span>
                        </button>
                    </div>
                </div>
                
                <div class="level-card animate delay-4" data-level="ielts">
                    <div class="level-header" style="background: linear-gradient(135deg, #72efdd, #1d3557);">
                        <h3 class="level-title">IELTS Vocabulary</h3>
                        <p class="level-desc"><span class="tr" data-key="ielts-desc">Academic English and exam core vocabulary</span></p>
                    </div>
                    <div class="level-stats">
                        <div class="stat">
                            <div class="stat-value">5,000+</div>
                            <div class="stat-label"><span class="tr" data-key="words">Words</span></div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">B2-C1</div>
                            <div class="stat-label">CEFR</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">4-6 months</div>
                            <div class="stat-label"><span class="tr" data-key="duration">Duration</span></div>
                        </div>
                    </div>
                    <div class="level-actions">
                        <button class="btn btn-primary vocab-btn" style="flex:1; background:#1d3557; color:white;">
                            <i class="fas fa-book"></i> <span class="tr" data-key="view-vocab">View Vocabulary</span>
                        </button>
                        <button class="btn" style="background:#e9ecef; flex:1;">
                            <i class="fas fa-list"></i> <span class="tr" data-key="preview">Preview</span>
                        </button>
                    </div>
                </div>
                
                <!-- CEFR国际分级 -->
                <div class="level-card animate delay-1" data-level="a1">
                    <div class="level-header" style="background: linear-gradient(135deg, var(--accent), #e6c000);">
                        <h3 class="level-title">Elementary (A1)</h3>
                        <p class="level-desc"><span class="tr" data-key="elem-a1-desc">Basic daily communication</span></p>
                    </div>
                    <div class="level-stats">
                        <div class="stat">
                            <div class="stat-value">700</div>
                            <div class="stat-label"><span class="tr" data-key="words">Words</span></div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">A1</div>
                            <div class="stat-label">CEFR</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">3-6 months</div>
                            <div class="stat-label"><span class="tr" data-key="duration">Duration</span></div>
                        </div>
                    </div>
                    <div class="level-actions">
                        <button class="btn btn-primary vocab-btn" style="flex:1; background:var(--primary); color:white;">
                            <i class="fas fa-book"></i> <span class="tr" data-key="view-vocab">View Vocabulary</span>
                        </button>
                        <button class="btn" style="background:#e9ecef; flex:1;">
                            <i class="fas fa-list"></i> <span class="tr" data-key="preview">Preview</span>
                        </button>
                    </div>
                </div>
                
                <div class="level-card animate delay-2" data-level="a2">
                    <div class="level-header" style="background: linear-gradient(135deg, #f72585, #b5179e);">
                        <h3 class="level-title">Pre-Intermediate (A2)</h3>
                        <p class="level-desc"><span class="tr" data-key="pre-int-desc">Simple daily conversations</span></p>
                    </div>
                    <div class="level-stats">
                        <div class="stat">
                            <div class="stat-value">1,200</div>
                            <div class="stat-label"><span class="tr" data-key="words">Words</span></div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">A2</div>
                            <div class="stat-label">CEFR</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">6-12 months</div>
                            <div class="stat-label"><span class="tr" data-key="duration">Duration</span></div>
                        </div>
                    </div>
                    <div class="level-actions">
                        <button class="btn btn-primary vocab-btn" style="flex:1; background:#f72585; color:white;">
                            <i class="fas fa-book"></i> <span class="tr" data-key="view-vocab">View Vocabulary</span>
                        </button>
                        <button class="btn" style="background:#e9ecef; flex:1;">
                            <i class="fas fa-list"></i> <span class="tr" data-key="preview">Preview</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 词库浏览区域 -->
        <section class="vocabulary-section" id="vocabulary-section">
            <div class="vocabulary-header">
                <h2><i class="fas fa-book"></i> <span class="tr" data-key="vocabulary">Vocabulary Bank</span> - <span id="vocabulary-level">High School</span></h2>
            </div>
            <div class="vocabulary-content">
                <div class="vocabulary-filters">
                    <button class="filter-btn active" data-filter="all"><span class="tr" data-key="all">All</span></button>
                    <button class="filter-btn" data-filter="nouns"><span class="tr" data-key="nouns">Nouns</span></button>
                    <button class="filter-btn" data-filter="verbs"><span class="tr" data-key="verbs">Verbs</span></button>
                    <button class="filter-btn" data-filter="adjectives"><span class="tr" data-key="adjectives">Adjectives</span></button>
                </div>
                
                <div class="vocabulary-grid" id="vocabulary-grid">
                    <!-- 词库内容将通过JS动态生成 -->
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-primary" id="start-vocab-learning">
                        <i class="fas fa-play-circle"></i> <span class="tr" data-key="start-learning">Start Learning This Vocabulary</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- 学习模式区域 -->
        <section class="learning-section" id="learning-section">
            <div class="learning-header">
                <h2><i class="fas fa-brain"></i> <span class="tr" data-key="learning-modes">Vocabulary Learning Modes</span></h2>
            </div>
            <div class="learning-content">
                <div class="mode-selector">
                    <button class="mode-btn active" data-mode="study">
                        <i class="fas fa-book"></i>
                        <span class="tr" data-key="study-mode">Study Mode</span>
                    </button>
                    <button class="mode-btn" data-mode="flashcard">
                        <i class="fas fa-address-card"></i>
                        <span class="tr" data-key="flashcard-mode">Flashcard Mode</span>
                    </button>
                    <button class="mode-btn" data-mode="writing">
                        <i class="fas fa-keyboard"></i>
                        <span class="tr" data-key="writing-mode">Writing Mode</span>
                    </button>
                    <button class="mode-btn" data-mode="quiz">
                        <i class="fas fa-pen"></i>
                        <span class="tr" data-key="quiz-mode">Quiz Mode</span>
                    </button>
                </div>
                
                <div class="word-card">
                    <div class="word-main" id="word-main">apple</div>
                    
                    <div class="pronunciation">
                        <div class="pronunciation-item">
                            <span>US: /ˈæp.əl/</span>
                            <button class="pronunciation-btn" onclick="speakWord('us')">
                                <i class="fas fa-volume-up"></i>
                            </button>
                        </div>
                        <div class="pronunciation-item">
                            <span>UK: /ˈæp.əl/</span>
                            <button class="pronunciation-btn" onclick="speakWord('uk')">
                                <i class="fas fa-volume-up"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="translation" id="word-translation">алма (Kazakh)</div>
                    <div class="part-of-speech" id="word-pos"><span class="tr" data-key="noun">Noun</span></div>
                    
                    <div class="example" id="word-example">
                        I eat an apple every day.
                        <div class="example-translation" id="example-translation">Мен күн сайын алма жеймін.</div>
                    </div>
                    
                    <div class="card-controls">
                        <button class="btn" style="background:#e9ecef;" id="prev-word">
                            <i class="fas fa-sync-alt"></i> <span class="tr" data-key="previous">Previous</span>
                        </button>
                        <button class="btn btn-primary" id="next-word">
                            <i class="fas fa-arrow-right"></i> <span class="tr" data-key="next">Next</span>
                        </button>
                        <button class="btn" style="background:#e9ecef;" id="favorite-word">
                            <i class="fas fa-star"></i> <span class="tr" data-key="favorite">Favorite</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 测验区域 -->
        <section class="quiz-section" id="quiz-section">
            <div class="quiz-header">
                <h2><i class="fas fa-file-alt"></i> <span class="tr" data-key="quiz-title">Vocabulary Quiz</span></h2>
            </div>
            <div class="quiz-content">
                <div class="quiz-type-selector">
                    <button class="quiz-type-btn active" data-quiz-type="multiple-choice">
                        <i class="fas fa-check-circle"></i> <span class="tr" data-key="mcq">Multiple Choice</span>
                    </button>
                    <button class="quiz-type-btn" data-quiz-type="fill-in-blank">
                        <i class="fas fa-edit"></i> <span class="tr" data-key="fill-blank">Fill in Blank</span>
                    </button>
                    <button class="quiz-type-btn" data-quiz-type="spelling">
                        <i class="fas fa-keyboard"></i> <span class="tr" data-key="spelling">Spelling</span>
                    </button>
                </div>
                
                <div class="quiz-question" id="quiz-question">
                    Select the correct Kazakh translation for "apple":
                </div>
                
                <!-- 选择题 -->
                <div class="options-grid" id="mcq-options">
                    <div class="option" data-option="a" onclick="selectOption(this, 'a')">
                        апельсин
                    </div>
                    <div class="option" data-option="b" onclick="selectOption(this, 'b')">
                        банан
                    </div>
                    <div class="option" data-option="c" onclick="selectOption(this, 'c')">
                        алма
                    </div>
                    <div class="option" data-option="d" onclick="selectOption(this, 'd')">
                        құлпынай
                    </div>
                </div>
                
                <!-- 填空题 -->
                <div class="fill-in-blank" id="fill-in-blank">
                    <div class="instruction">
                        <span class="tr" data-key="fill-blank-instruction">Fill in the blank with the correct word:</span>
                    </div>
                    <div id="fill-in-sentence">I eat an _____ every day.</div>
                    <input type="text" id="fill-in-answer" placeholder="Type your answer...">
                </div>
                
                <!-- 拼写题 -->
                <div class="spelling-practice" id="spelling-practice">
                    <div class="instruction">
                        <span class="tr" data-key="spelling-instruction">Type the word you hear:</span>
                    </div>
                    <div class="pronunciation-controls">
                        <button class="pronunciation-btn-large" onclick="speakWordForQuiz('us')">
                            <i class="fas fa-volume-up"></i>
                        </button>
                    </div>
                    <input type="text" id="spelling-answer" placeholder="Type the word...">
                </div>
                
                <div class="quiz-footer">
                    <div class="progress-container">
                        <div><span class="tr" data-key="question">Question</span> <span id="current-question">1</span>/<span id="total-questions">10</span></div>
                        <div class="progress-bar">
                            <div class="progress" style="width: 10%"></div>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="submit-answer">
                        <i class="fas fa-check-circle"></i> <span class="tr" data-key="submit">Submit</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- 错题本区域 -->
        <section class="mistakes-section" id="mistakes-section">
            <div class="mistakes-header">
                <h2><i class="fas fa-exclamation-triangle"></i> <span class="tr" data-key="mistakes-title">Mistakes (0)</span></h2>
            </div>
            <div class="mistakes-content">
                <div id="mistakes-list">
                    <!-- 错题列表将通过JS动态生成 -->
                    <div class="empty-mistakes" style="text-align:center; padding:40px 0; color:#6c757d;">
                        <i class="fas fa-check-circle" style="font-size:3rem; margin-bottom:15px; color:#4ade80;"></i>
                        <h3><span class="tr" data-key="no-mistakes">No mistakes yet!</span></h3>
                        <p><span class="tr" data-key="keep-learning">Keep learning to build your mistakes list</span></p>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-primary" id="review-mistakes-btn" style="display:none;">
                        <i class="fas fa-sync-alt"></i> <span class="tr" data-key="review-mistakes">Review Mistakes</span>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-language"></i>
                </div>
                <h3>TilGo</h3>
                <p><span class="tr" data-key="footer-desc">Systematic English Vocabulary Learning | Scientific Grading · Comprehensive Word Bank · Smart Learning</span></p>
                <p>© 2023 TilGo. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- =============== 重要：需要您替换的3行配置 =============== -->
    <!-- 替换步骤： -->
    <!-- 1. 访问 https://firebase.google.com -->
    <!-- 2. 创建项目（免费） -->
    <!-- 3. 在项目设置中获取配置 -->
    <!-- 4. 替换下方3行 YOUR_API_KEY, YOUR_AUTH_DOMAIN, YOUR_PROJECT_ID -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script>
        // ====================== 请替换这3行配置 ======================
        const FIREBASE_API_KEY = "YOUR_API_KEY";       // 替换为您的API Key
        const FIREBASE_AUTH_DOMAIN = "YOUR_AUTH_DOMAIN"; // 替换为您的Auth Domain
        const FIREBASE_PROJECT_ID = "YOUR_PROJECT_ID";   // 替换为您的Project ID
        // ===========================================================
        
        // Firebase配置（无需修改下面内容）
        const firebaseConfig = {
            apiKey: FIREBASE_API_KEY,
            authDomain: FIREBASE_AUTH_DOMAIN,
            projectId: FIREBASE_PROJECT_ID,
            storageBucket: `${FIREBASE_PROJECT_ID}.appspot.com`,
            messagingSenderId: "1234567890",  // 可选，不影响登录功能
            appId: `1:1234567890:web:abcdef123456`  // 可选，不影响登录功能
        };
        
        // 初始化Firebase
        try {
            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
        } catch (e) {
            console.log("Firebase未配置。请按照说明替换配置。");
        }
    </script>
    <!-- =============== 结束需要替换的配置 =============== -->

    <script>
        // 多语言资源
        const languageResources = {
            en: {
                "current-level": "Current Level: High School",
                "login": "Login",
                "hero-title": "TilGo - Systematic English Learning",
                "hero-subtitle": "Language Learning Made Easy! 🌍",
                "hero-desc": "Scientific word bank + Multiple learning modes + Smart quizzes",
                "start-learning": "Start Learning",
                "start-quiz": "Start Quiz",
                "select-level": "Select Learning Level",
                "elem-desc": "Basic daily vocabulary for grades 1-6",
                "middle-desc": "Basic grammar and daily communication",
                "high-desc": "Academic and daily comprehensive vocabulary",
                "ielts-desc": "Academic English and exam core vocabulary",
                "words": "Words",
                "duration": "Duration",
                "preview": "Preview",
                "vocabulary": "Vocabulary Bank",
                "view-vocab": "View Vocabulary",
                "all": "All",
                "nouns": "Nouns",
                "verbs": "Verbs",
                "adjectives": "Adjectives",
                "learning-modes": "Vocabulary Learning Modes",
                "study-mode": "Study Mode",
                "flashcard-mode": "Flashcard Mode",
                "writing-mode": "Writing Mode",
                "quiz-mode": "Quiz Mode",
                "noun": "Noun",
                "previous": "Previous",
                "next": "Next",
                "favorite": "Favorite",
                "quiz-title": "Vocabulary Quiz",
                "quiz-question1": "Select the correct Kazakh translation for \"apple\":",
                "question": "Question",
                "next-question": "Next Question",
                "mistakes-title": "Mistakes (0)",
                "review-mistakes": "Review Mistakes",
                "footer-desc": "Systematic English Vocabulary Learning | Scientific Grading · Comprehensive Word Bank · Smart Learning",
                "logout": "Logout",
                "phone-prompt": "Enter phone number (+7...)",
                "send-code": "Send Code",
                "code-prompt": "Enter verification code",
                "verify": "Verify",
                "close": "Close",
                "login-success": "Logged in successfully!",
                "login-failed": "Login failed. Please try again.",
                "welcome": "Welcome!",
                "logout-success": "Logged out successfully!",
                "mcq": "Multiple Choice",
                "fill-blank": "Fill in Blank",
                "spelling": "Spelling",
                "fill-blank-instruction": "Fill in the blank with the correct word:",
                "spelling-instruction": "Type the word you hear:",
                "submit": "Submit",
                "correct": "Correct!",
                "incorrect": "Incorrect!",
                "correct-answer": "Correct answer: ",
                "no-mistakes": "No mistakes yet!",
                "keep-learning": "Keep learning to build your mistakes list",
                "mistakes": "Mistakes"
            },
            kk: {
                "current-level": "Ағымдағы деңгей: Жоғарғы мектеп",
                "login": "Кіру",
                "hero-title": "TilGo - Қазақша English үйрену жүйесі",
                "hero-subtitle": "Тілді үйрену оңай! 🌍",
                "hero-desc": "Ғылыми әдістер + Қолданбалы сөздік + Ақылды тестілеу",
                "start-learning": "Үйренуді бастау",
                "start-quiz": "Тестті бастау",
                "select-level": "Үйрену деңгейін таңдаңыз",
                "elem-desc": "1-6 сыныптарға арналған негізгі күнделікті сөздер",
                "middle-desc": "Негізгі грамматика және күнделікті сөйлесу",
                "high-desc": "Академиялық және күнделікті толық сөздік",
                "ielts-desc": "Академиялық English және сынақ негізгі сөздері",
                "words": "Сөздер",
                "duration": "Уақыт",
                "preview": "Алдын ала қарау",
                "vocabulary": "Сөздік қоры",
                "view-vocab": "Сөздік қорын қарау",
                "all": "Барлығы",
                "nouns": "Зат есімдер",
                "verbs": "Етістіктер",
                "adjectives": "Сын есімдер",
                "learning-modes": "Сөздік үйрену тәсілдері",
                "study-mode": "Оқу тәсілі",
                "flashcard-mode": "Флэшкарталар тәсілі",
                "writing-mode": "Жазба тәсілі",
                "quiz-mode": "Тест тәсілі",
                "noun": "Зат есім",
                "previous": "Алдыңғы",
                "next": "Келесі",
                "favorite": "Таңдаулы",
                "quiz-title": "Сөздік тесті",
                "quiz-question1": "\"apple\" сөзінің қазақша дұрыс аудармасын таңдаңыз:",
                "question": "Сұрақ",
                "next-question": "Келесі сұрақ",
                "mistakes-title": "Қателер (0)",
                "review-mistakes": "Қателерді қайталау",
                "footer-desc": "Жүйелі English сөздік үйрену | Ғылыми бағалау · Толық сөздік қоры · Ақылды үйрену",
                "logout": "Шығу",
                "phone-prompt": "Телефон нөмірін енгізіңіз (+7...)",
                "send-code": "SMS жіберу",
                "code-prompt": "SMS кодын енгізіңіз",
                "verify": "Тексеру",
                "close": "Жабу",
                "login-success": "Сәтті кірдіңіз!",
                "login-failed": "Кіру қатесі. Қайталап көріңіз.",
                "welcome": "Қош келдіңіз!",
                "logout-success": "Сәтті шықтыңыз!",
                "mcq": "Таңдаулы сұрақтар",
                "fill-blank": "Бос орынды толтыру",
                "spelling": "Әріптеу",
                "fill-blank-instruction": "Бос орынды дұрыс сөзбен толтырыңыз:",
                "spelling-instruction": "Естіген сөзді теріңіз:",
                "submit": "Жіберу",
                "correct": "Дұрыс!",
                "incorrect": "Қате!",
                "correct-answer": "Дұрыс жауап: ",
                "no-mistakes": "Қате жоқ!",
                "keep-learning": "Қателер тізімін жасау үшін үйренуді жалғастырыңыз",
                "mistakes": "Қателер"
            },
            ru: {
                "current-level": "Текущий уровень: Средняя школа",
                "login": "Войти",
                "hero-title": "TilGo - Система изучения английского",
                "hero-subtitle": "Изучение языка легко! 🌍",
                "hero-desc": "Научные методы + Практический словарь + Умные тесты",
                "start-learning": "Начать обучение",
                "start-quiz": "Начать тест",
                "select-level": "Выберите уровень обучения",
                "elem-desc": "Основная повседневная лексика для 1-6 классов",
                "middle-desc": "Основная грамматика и повседневное общение",
                "high-desc": "Академическая и повседневная комплексная лексика",
                "ielts-desc": "Академический английский и основная лексика для экзаменов",
                "words": "Слова",
                "duration": "Продолжительность",
                "preview": "Предварительный просмотр",
                "vocabulary": "Словарный запас",
                "view-vocab": "Просмотреть словарь",
                "all": "Все",
                "nouns": "Существительные",
                "verbs": "Глаголы",
                "adjectives": "Прилагательные",
                "learning-modes": "Режимы изучения словаря",
                "study-mode": "Режим изучения",
                "flashcard-mode": "Режим флеш-карт",
                "writing-mode": "Режим письма",
                "quiz-mode": "Режим теста",
                "noun": "Существительное",
                "previous": "Предыдущий",
                "next": "Следующий",
                "favorite": "Избранное",
                "quiz-title": "Словарный тест",
                "quiz-question1": "Выберите правильный казахский перевод для слова \"apple\":",
                "question": "Вопрос",
                "next-question": "Следующий вопрос",
                "mistakes-title": "Ошибки (0)",
                "review-mistakes": "Повторить ошибки",
                "footer-desc": "Систематическое изучение английского словарного запаса | Научная градация · Комплексная база слов · Умное обучение",
                "logout": "Выйти",
                "phone-prompt": "Введите номер телефона (+7...)",
                "send-code": "Отправить код",
                "code-prompt": "Введите код подтверждения",
                "verify": "Проверить",
                "close": "Закрыть",
                "login-success": "Успешный вход в систему!",
                "login-failed": "Ошибка входа. Пожалуйста, попробуйте еще раз.",
                "welcome": "Добро пожаловать!",
                "logout-success": "Вы успешно вышли из системы!",
                "mcq": "Множественный выбор",
                "fill-blank": "Заполнить пропуск",
                "spelling": "Написание",
                "fill-blank-instruction": "Заполните пропуск правильным словом:",
                "spelling-instruction": "Напишите слово, которое вы слышите:",
                "submit": "Отправить",
                "correct": "Верно!",
                "incorrect": "Неверно!",
                "correct-answer": "Правильный ответ: ",
                "no-mistakes": "Ошибок пока нет!",
                "keep-learning": "Продолжайте учиться, чтобы собрать список ошибок",
                "mistakes": "Ошибки"
            },
            zh: {
                "current-level": "当前级别: 高中词汇",
                "login": "登录",
                "hero-title": "TilGo - 系统化英语学习平台",
                "hero-subtitle": "语言学习变得简单！🌍",
                "hero-desc": "科学分级词库 + 多种学习模式 + 智能测验系统",
                "start-learning": "开始学习",
                "start-quiz": "开始测验",
                "select-level": "选择学习级别",
                "elem-desc": "基础日常词汇，适合1-6年级",
                "middle-desc": "基础语法与日常交流词汇",
                "high-desc": "学术与生活综合词汇",
                "ielts-desc": "学术英语与考试核心词汇",
                "words": "单词量",
                "duration": "学习时长",
                "preview": "词库预览",
                "vocabulary": "词汇库",
                "view-vocab": "查看词汇库",
                "all": "全部",
                "nouns": "名词",
                "verbs": "动词",
                "adjectives": "形容词",
                "learning-modes": "单词学习模式",
                "study-mode": "背诵模式",
                "flashcard-mode": "卡片模式",
                "writing-mode": "默写模式",
                "quiz-mode": "测验模式",
                "noun": "名词",
                "previous": "上一个",
                "next": "下一个",
                "favorite": "收藏",
                "quiz-title": "单词测验",
                "quiz-question1": "选择 \"apple\" 的正确哈萨克语翻译:",
                "question": "问题",
                "next-question": "下一题",
                "mistakes-title": "错题本 (0)",
                "review-mistakes": "复习错题",
                "footer-desc": "系统化英语单词学习平台 | 科学分级 · 全面词库 · 智能学习",
                "logout": "退出",
                "phone-prompt": "请输入手机号码 (+7...)",
                "send-code": "发送验证码",
                "code-prompt": "请输入验证码",
                "verify": "验证",
                "close": "关闭",
                "login-success": "登录成功！",
                "login-failed": "登录失败，请重试。",
                "welcome": "欢迎！",
                "logout-success": "已成功退出！",
                "mcq": "选择题",
                "fill-blank": "填空题",
                "spelling": "拼写题",
                "fill-blank-instruction": "用正确单词填空：",
                "spelling-instruction": "输入你听到的单词：",
                "submit": "提交",
                "correct": "正确！",
                "incorrect": "错误！",
                "correct-answer": "正确答案：",
                "no-mistakes": "暂无错题！",
                "keep-learning": "继续学习以积累错题",
                "mistakes": "错题"
            }
        };

        // 当前语言
        let currentLang = 'en';
        let currentLevel = 'high'; // 默认级别
        let currentMode = 'study'; // 默认学习模式
        let currentQuizType = 'multiple-choice'; // 默认测验类型
        
        // 词库数据（简化版，实际应用应从数据库加载）
        const vocabularyData = {
            elementary: [
                { word: "apple", usPronunciation: "/ˈæp.əl/", ukPronunciation: "/ˈæp.əl/", kazakhTranslation: "алма", partOfSpeech: "noun", category: "nouns", exampleSentence: "I eat an apple every day.", exampleTranslation: "Мен күн сайын алма жеймін." },
                { word: "book", usPronunciation: "/bʊk/", ukPronunciation: "/bʊk/", kazakhTranslation: "кітап", partOfSpeech: "noun", category: "nouns", exampleSentence: "This is my book.", exampleTranslation: "Бұл менің кітабым." },
                { word: "run", usPronunciation: "/rʌn/", ukPronunciation: "/rʌn/", kazakhTranslation: "жүгіру", partOfSpeech: "verb", category: "verbs", exampleSentence: "I run every morning.", exampleTranslation: "Мен әрқашанда таңертең жүгіремін." },
                { word: "big", usPronunciation: "/bɪɡ/", ukPronunciation: "/bɪɡ/", kazakhTranslation: "үлкен", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "This is a big house.", exampleTranslation: "Бұл үлкен үй." },
                { word: "cat", usPronunciation: "/kæt/", ukPronunciation: "/kæt/", kazakhTranslation: "мысық", partOfSpeech: "noun", category: "nouns", exampleSentence: "The cat is sleeping.", exampleTranslation: "Мысық ұйықтап жатыр." },
                { word: "dog", usPronunciation: "/dɒɡ/", ukPronunciation: "/dɔːɡ/", kazakhTranslation: "ит", partOfSpeech: "noun", category: "nouns", exampleSentence: "I have a dog.", exampleTranslation: "Менің итім бар." },
                { word: "red", usPronunciation: "/red/", ukPronunciation: "/red/", kazakhTranslation: "қызыл", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "This apple is red.", exampleTranslation: "Бұл алма қызыл." },
                { word: "jump", usPronunciation: "/dʒʌmp/", ukPronunciation: "/dʒʌmp/", kazakhTranslation: "секіру", partOfSpeech: "verb", category: "verbs", exampleSentence: "The rabbit can jump.", exampleTranslation: "Қоян секіре алады." }
            ],
            middle: [
                { word: "important", usPronunciation: "/ɪmˈpɔː.tənt/", ukPronunciation: "/ɪmˈpɔː.tənt/", kazakhTranslation: "маңызды", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "Education is important.", exampleTranslation: "Білім маңызды." },
                { word: "understand", usPronunciation: "/ˌʌn.dəˈstænd/", ukPronunciation: "/ˌʌn.dəˈstænd/", kazakhTranslation: "түсіну", partOfSpeech: "verb", category: "verbs", exampleSentence: "I understand the lesson.", exampleTranslation: "Мен сабақты түсіндім." },
                { word: "difficult", usPronunciation: "/ˈdɪf.ɪ.kəlt/", ukPronunciation: "/ˈdɪf.ɪ.kəlt/", kazakhTranslation: "қиын", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "This exercise is difficult.", exampleTranslation: "Бұл жаттығу қиын." },
                { word: "opportunity", usPronunciation: "/ˌɒp.əˈtʃuː.nə.ti/", ukPronunciation: "/ˌɑː.pɚˈtjuː.nə.ti/", kazakhTranslation: "мүмкіндік", partOfSpeech: "noun", category: "nouns", exampleSentence: "This is a good opportunity.", exampleTranslation: "Бұл жақсы мүмкіндік." },
                { word: "environment", usPronunciation: "/ɪnˈvaɪ.rən.mənt/", ukPronunciation: "/ɪnˈvaɪ.rən.mənt/", kazakhTranslation: "қоршаған орта", partOfSpeech: "noun", category: "nouns", exampleSentence: "We should protect the environment.", exampleTranslation: "Біз қоршаған ортаны қорғауымыз керек." },
                { word: "achieve", usPronunciation: "/əˈtʃiːv/", ukPronunciation: "/əˈtʃiːv/", kazakhTranslation: "жету", partOfSpeech: "verb", category: "verbs", exampleSentence: "You can achieve your goals.", exampleTranslation: "Сіз өз мақсаттарыңызға жете аласыз." },
                { word: "improve", usPronunciation: "/ɪmˈpruːv/", ukPronunciation: "/ɪmˈpruːv/", kazakhTranslation: "жақсарту", partOfSpeech: "verb", category: "verbs", exampleSentence: "I want to improve my English.", exampleTranslation: "Мен ағылшын тілімді жақсартқым келеді." },
                { word: "communicate", usPronunciation: "/kəˈmjuː.nɪ.keɪt/", ukPronunciation: "/kəˈmjuː.nɪ.keɪt/", kazakhTranslation: "байланыс", partOfSpeech: "verb", category: "verbs", exampleSentence: "It's important to communicate clearly.", exampleTranslation: "Түсінікті байланыс жасау маңызды." }
            ],
            high: [
                { word: "significant", usPronunciation: "/sɪɡˈnɪf.ɪ.kənt/", ukPronunciation: "/sɪɡˈnɪf.ɪ.kənt/", kazakhTranslation: "маңызды", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "This is a significant discovery.", exampleTranslation: "Бұл маңызды ашылу." },
                { word: "analyze", usPronunciation: "/ˈæn.ə.laɪz/", ukPronunciation: "/ˈæn.ə.laɪz/", kazakhTranslation: "талдау", partOfSpeech: "verb", category: "verbs", exampleSentence: "We need to analyze the data.", exampleTranslation: "Біз деректерді талдауымыз керек." },
                { word: "perspective", usPronunciation: "/pərˈspek.tɪv/", ukPronunciation: "/pɚˈspek.tɪv/", kazakhTranslation: "көзқарас", partOfSpeech: "noun", category: "nouns", exampleSentence: "From my perspective, it's correct.", exampleTranslation: "Менің көзқарасымша, бұл дұрыс." },
                { word: "consequence", usPronunciation: "/ˈkɒn.sɪ.kwəns/", ukPronunciation: "/ˈkɑːn.sə.kwens/", kazakhTranslation: "салдар", partOfSpeech: "noun", category: "nouns", exampleSentence: "Every action has consequences.", exampleTranslation: "Әр әрекеттің салдары бар." },
                { word: "innovative", usPronunciation: "/ˈɪn.ə.və.tɪv/", ukPronunciation: "/ˈɪn.ə.va.tɪv/", kazakhTranslation: "инновациялық", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "They have an innovative approach.", exampleTranslation: "Оларда инновациялық тәсіл бар." },
                { word: "evaluate", usPronunciation: "/ɪˈvæl.ju.eɪt/", ukPronunciation: "/ɪˈvæl.ju.eɪt/", kazakhTranslation: "бағалау", partOfSpeech: "verb", category: "verbs", exampleSentence: "We need to evaluate the results.", exampleTranslation: "Біз нәтижелерді бағалауымыз керек." },
                { word: "comprehensive", usPronunciation: "/ˌkɒm.prɪˈhen.sɪv/", ukPronunciation: "/ˌkɑːm.prɪˈhen.sɪv/", kazakhTranslation: "толық", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "This is a comprehensive guide.", exampleTranslation: "Бұл толық нұсқаулық." },
                { word: "phenomenon", usPronunciation: "/fəˈnɒm.ɪ.nən/", ukPronunciation: "/fəˈnɑː.mɪ.nɑːn/", kazakhTranslation: "құбылыс", partOfSpeech: "noun", category: "nouns", exampleSentence: "This is a strange phenomenon.", exampleTranslation: "Бұл ғажайып құбылыс." }
            ],
            ielts: [
                { word: "sustainable", usPronunciation: "/səˈsteɪ.nə.bəl/", ukPronunciation: "/səˈsteɪ.nə.bəl/", kazakhTranslation: "тұрақты", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "We need sustainable development.", exampleTranslation: "Бізге тұрақты даму қажет." },
                { word: "globalization", usPronunciation: "/ˌɡləʊ.bəl.aɪˈzeɪ.ʃən/", ukPronunciation: "/ˌɡloʊ.bə.ləˈzeɪ.ʃən/", kazakhTranslation: "глобалдау", partOfSpeech: "noun", category: "nouns", exampleSentence: "Globalization has many effects.", exampleTranslation: "Глобалдаудың көп әсерлері бар." },
                { word: "controversial", usPronunciation: "/ˌkɒn.trəˈvɜː.ʃəl/", ukPronunciation: "/ˌkɑːn.trəˈvɝː.ʃəl/", kazakhTranslation: "талас тудыратын", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "This is a controversial topic.", exampleTranslation: "Бұл талас тудыратын тақырып." },
                { word: "infrastructure", usPronunciation: "/ˈɪn.frə.strʌk.tʃər/", ukPronunciation: "/ˈɪn.frə.strʌk.tʃɚ/", kazakhTranslation: "инфрақұрылым", partOfSpeech: "noun", category: "nouns", exampleSentence: "The city needs better infrastructure.", exampleTranslation: "Қалаға жақсырақ инфрақұрылым қажет." },
                { word: "paradigm", usPronunciation: "/ˈpær.ə.daɪm/", ukPronunciation: "/ˈper.ə.daɪm/", kazakhTranslation: "парадигма", partOfSpeech: "noun", category: "nouns", exampleSentence: "This is a new paradigm.", exampleTranslation: "Бұл жаңа парадигма." },
                { word: "synthesize", usPronunciation: "/ˈsɪn.θə.saɪz/", ukPronunciation: "/ˈsɪn.θə.saɪz/", kazakhTranslation: "синтездеу", partOfSpeech: "verb", category: "verbs", exampleSentence: "We need to synthesize the information.", exampleTranslation: "Біз ақпаратты синтездеуіміз керек." },
                { word: "coherent", usPronunciation: "/koʊˈhɪr.ənt/", ukPronunciation: "/koʊˈhɪr.ənt/", kazakhTranslation: "байланысты", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "Your argument should be coherent.", exampleTranslation: "Сіздің пікіріңіз байланысты болуы керек." },
                { word: "dilemma", usPronunciation: "/dɪˈlem.ə/", ukPronunciation: "/dɪˈlem.ə/", kazakhTranslation: "дилемма", partOfSpeech: "noun", category: "nouns", exampleSentence: "I'm facing a difficult dilemma.", exampleTranslation: "Мен қиын дилеммаға тап болып отырмын." }
            ],
            a1: [
                { word: "hello", usPronunciation: "/həˈloʊ/", ukPronunciation: "/həˈləʊ/", kazakhTranslation: "сәлем", partOfSpeech: "exclamation", category: "nouns", exampleSentence: "Hello, how are you?", exampleTranslation: "Сәлем, қалдыңыз қалай?" },
                { word: "goodbye", usPronunciation: "/ˌɡʊdˈbaɪ/", ukPronunciation: "/ˌɡʊdˈbaɪ/", kazakhTranslation: "қош", partOfSpeech: "exclamation", category: "nouns", exampleSentence: "Goodbye, see you tomorrow.", exampleTranslation: "Қош, ертең кездесеміз." },
                { word: "yes", usPronunciation: "/jes/", ukPronunciation: "/jes/", kazakhTranslation: "иә", partOfSpeech: "adverb", category: "nouns", exampleSentence: "Yes, I understand.", exampleTranslation: "Иә, түсіндім." },
                { word: "no", usPronunciation: "/noʊ/", ukPronunciation: "/nəʊ/", kazakhTranslation: "жоқ", partOfSpeech: "adverb", category: "nouns", exampleSentence: "No, I don't know.", exampleTranslation: "Жоқ, мен білмеймін." },
                { word: "thank you", usPronunciation: "/ˌθæŋk ˈjuː/", ukPronunciation: "/ˌθæŋk ˈjuː/", kazakhTranslation: "рахмет", partOfSpeech: "phrase", category: "nouns", exampleSentence: "Thank you for your help.", exampleTranslation: "Көмегіңіз үшін рахмет." },
                { word: "please", usPronunciation: "/pliːz/", ukPronunciation: "/pliːz/", kazakhTranslation: "мында", partOfSpeech: "adverb", category: "nouns", exampleSentence: "Please sit down.", exampleTranslation: "Отырыңызшы." },
                { word: "sorry", usPronunciation: "/ˈsɒr.i/", ukPronunciation: "/ˈsɑː.ri/", kazakhTranslation: "кешірім сұрау", partOfSpeech: "exclamation", category: "nouns", exampleSentence: "I'm sorry for being late.", exampleTranslation: "Кешігіп келгендігіме кешірім сұраймын." },
                { word: "excuse me", usPronunciation: "/ɪkˈskjuːz miː/", ukPronunciation: "/ɪkˈskjuːz miː/", kazakhTranslation: "кешіріңіз", partOfSpeech: "phrase", category: "nouns", exampleSentence: "Excuse me, where is the bathroom?", exampleTranslation: "Кешіріңіз, ванна бөлме қайда?" }
            ],
            a2: [
                { word: "interesting", usPronunciation: "/ˈɪn.trəs.tɪŋ/", ukPronunciation: "/ˈɪn.trəs.tɪŋ/", kazakhTranslation: "қызықты", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "This is an interesting book.", exampleTranslation: "Бұл қызықты кітап." },
                { word: "boring", usPronunciation: "/ˈbɔː.rɪŋ/", ukPronunciation: "/ˈbɔː.rɪŋ/", kazakhTranslation: "бірсарынды", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "This movie is boring.", exampleTranslation: "Бұл фильм бірсарынды." },
                { word: "expensive", usPronunciation: "/ɪkˈspen.sɪv/", ukPronunciation: "/ɪkˈspen.sɪv/", kazakhTranslation: "қымбат", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "This car is expensive.", exampleTranslation: "Бұл көлік қымбат." },
                { word: "cheap", usPronunciation: "/tʃiːp/", ukPronunciation: "/tʃiːp/", kazakhTranslation: "арзан", partOfSpeech: "adjective", category: "adjectives", exampleSentence: "This shirt is cheap.", exampleTranslation: "Бұл футболка арзан." },
                { word: "quickly", usPronunciation: "/ˈkwɪk.li/", ukPronunciation: "/ˈkwɪk.li/", kazakhTranslation: "тез", partOfSpeech: "adverb", category: "adjectives", exampleSentence: "He runs quickly.", exampleTranslation: "Ол тез жүгіреді." },
                { word: "slowly", usPronunciation: "/ˈsləʊ.li/", ukPronunciation: "/ˈsloʊ.li/", kazakhTranslation: "баяу", partOfSpeech: "adverb", category: "adjectives", exampleSentence: "She speaks slowly.", exampleTranslation: "Ол баяу сөйлейді." },
                { word: "usually", usPronunciation: "/ˈjuː.ʒu.əl.i/", ukPronunciation: "/ˈjuː.ʒu.əl.i/", kazakhTranslation: "әдетте", partOfSpeech: "adverb", category: "adjectives", exampleSentence: "I usually go to school by bus.", exampleTranslation: "Мен әдетте автобуспен мектепке барамын." },
                { word: "sometimes", usPronunciation: "/ˈsʌm.taɪmz/", ukPronunciation: "/ˈsʌm.taɪmz/", kazakhTranslation: "кейде", partOfSpeech: "adverb", category: "adjectives", exampleSentence: "Sometimes I eat pizza.", exampleTranslation: "Кейде мен пицца жеймін." }
            ]
        };

        // 错题本
        let mistakes = [];
        
        // 当前学习单词索引
        let currentWordIndex = 0;
        
        // 当前测验状态
        let currentQuiz = {
            type: 'multiple-choice',
            questions: [],
            currentQuestion: 0,
            score: 0,
            userAnswers: []
        };

        // 检查本地存储中的语言偏好
        document.addEventListener('DOMContentLoaded', function() {
            const savedLang = localStorage.getItem('tilgo-lang');
            if (savedLang && languageResources[savedLang]) {
                currentLang = savedLang;
                document.getElementById('language-select').value = currentLang;
            }
            updateLanguage();
            
            // 设置语言选择器事件
            document.getElementById('language-select').addEventListener('change', function() {
                currentLang = this.value;
                localStorage.setItem('tilgo-lang', currentLang);
                updateLanguage();
            });
            
            // 设置登录按钮事件
            document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('.btn-outline').addEventListener('click', function() {
        const text = document.querySelector('.btn-outline span').textContent;
        if(text.includes('Logout') || text.includes('Шығу') || text.includes('Выйти') || text.includes('退出')) {
            handleLogout();
        } else {
            showLoginModal();
        }
    });
});
            
            // 设置测验类型切换
            document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.quiz-type-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.quiz-type-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            currentQuizType = this.getAttribute('data-quiz-type');
            
            // 切换测验题型显示
            document.getElementById('mcq-options').style.display = currentQuizType === 'multiple-choice' ? 'grid' : 'none';
            document.getElementById('fill-in-blank').className = currentQuizType === 'fill-in-blank' ? 'fill-in-blank active' : 'fill-in-blank';
            document.getElementById('spelling-practice').className = currentQuizType === 'spelling' ? 'spelling-practice active' : 'spelling-practice';
            
            // 生成新题型的题目
            generateQuizQuestion();
        });
    });
});
            
            // 设置词库级别选择
            document.querySelectorAll('.vocab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const level = this.closest('.level-card').getAttribute('data-level');
                    showVocabulary(level);
                });
            });
            
            // 设置词库筛选
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const filter = this.getAttribute('data-filter');
                    filterVocabulary(filter);
                });
            });
            
            // 词库学习按钮
            document.getElementById('start-vocab-learning').addEventListener('click', function() {
                showLearningSection();
            });
            
            // 测验提交按钮
            document.getElementById('submit-answer').addEventListener('click', submitQuizAnswer);
            
            // 词库单词点击
            document.addEventListener('click', function(e) {
                if(e.target.closest('.vocabulary-word')) {
                    const word = e.target.closest('.vocabulary-word').getAttribute('data-word');
                    selectVocabularyWord(word);
                }
            });
            
            // 上一个/下一个单词
            document.getElementById('prev-word').addEventListener('click', () => changeWord(-1));
            document.getElementById('next-word').addEventListener('click', () => changeWord(1));
            
            // 收藏单词
            document.getElementById('favorite-word').addEventListener('click', toggleFavorite);
            
            // 复习错题按钮
            document.getElementById('review-mistakes-btn').addEventListener('click', startMistakesReview);
        });

        // 更新界面语言
        function updateLanguage() {
            // 更新所有带 tr 属性的元素
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (languageResources[currentLang][key]) {
                    element.textContent = languageResources[currentLang][key];
                }
            });
            
            // 更新占位符等动态内容
            const phoneNumberInput = document.getElementById('phone-number');
            if(phoneNumberInput) {
                phoneNumberInput.placeholder = languageResources[currentLang]['phone-prompt'] || 'Enter phone number (+7...)';
            }
            
            const codeInput = document.getElementById('verification-code');
            if(codeInput) {
                codeInput.placeholder = languageResources[currentLang]['code-prompt'] || 'Enter verification code';
            }
            
            // 更新错题本标题
            updateMistakesTitle();
            
            // 特殊处理：哈萨克语需要应用特殊样式
            if (currentLang === 'kk') {
                document.body.classList.add('kk');
                document.body.classList.remove('ru', 'zh');
            } else if (currentLang === 'ru') {
                document.body.classList.add('ru');
                document.body.classList.remove('kk', 'zh');
            } else if (currentLang === 'zh') {
                document.body.classList.add('zh');
                document.body.classList.remove('kk', 'ru');
            } else {
                document.body.classList.remove('kk', 'ru', 'zh');
            }
        }
        
        // 显示词库
        function showVocabulary(level) {
            currentLevel = level;
            
            // 更新词库标题
            document.getElementById('vocabulary-level').textContent = 
                document.querySelector(`.level-card[data-level="${level}"] .level-title`).textContent;
            
            // 显示词库区域
            document.getElementById('learning-section').style.display = 'none';
            document.getElementById('quiz-section').style.display = 'none';
            document.getElementById('mistakes-section').style.display = 'none';
            document.getElementById('vocabulary-section').style.display = 'block';
            
            // 生成词库
            renderVocabulary(vocabularyData[level]);
            
            // 滚动到顶部
            window.scrollTo({ 
                top: document.getElementById('vocabulary-section').offsetTop - 20, 
                behavior: 'smooth' 
            });
        }
        
        // 渲染词库
        function renderVocabulary(words) {
            const vocabularyGrid = document.getElementById('vocabulary-grid');
            vocabularyGrid.innerHTML = '';
            
            words.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'vocabulary-word';
                wordElement.setAttribute('data-word', word.word);
                
                wordElement.innerHTML = `
                    <div class="word">${word.word}</div>
                    <div class="translation">${word.kazakhTranslation} (${languageResources[currentLang]['kazakh'] || 'Kazakh'})</div>
                `;
                
                vocabularyGrid.appendChild(wordElement);
            });
        }
        
        // 过滤词库
        function filterVocabulary(filter) {
            const words = vocabularyData[currentLevel];
            let filteredWords = words;
            
            if(filter !== 'all') {
                filteredWords = words.filter(word => word.category === filter);
            }
            
            renderVocabulary(filteredWords);
        }
        
        // 选择词库单词
        function selectVocabularyWord(word) {
            // 移除之前的选择
            document.querySelectorAll('.vocabulary-word').forEach(w => {
                w.classList.remove('selected');
            });
            
            // 标记为选中
            document.querySelector(`.vocabulary-word[data-word="${word}"]`).classList.add('selected');
            
            // 在学习区域显示该单词
            const vocabulary = vocabularyData[currentLevel];
            const wordData = vocabulary.find(w => w.word === word);
            
            if(wordData) {
                displayWord(wordData);
                currentWordIndex = vocabulary.indexOf(wordData);
            }
        }
        
        // 显示学习区域
        function showLearningSection() {
            document.getElementById('vocabulary-section').style.display = 'none';
            document.getElementById('learning-section').style.display = 'block';
            
            // 显示第一个单词
            if(vocabularyData[currentLevel] && vocabularyData[currentLevel].length > 0) {
                displayWord(vocabularyData[currentLevel][0]);
                currentWordIndex = 0;
            }
            
            // 滚动到顶部
            window.scrollTo({ 
                top: document.getElementById('learning-section').offsetTop - 20, 
                behavior: 'smooth' 
            });
        }
        
        // 显示单词
        function displayWord(wordData) {
            document.getElementById('word-main').textContent = wordData.word;
            document.getElementById('word-translation').textContent = `${wordData.kazakhTranslation} (Kazakh)`;
            document.getElementById('word-pos').textContent = languageResources[currentLang][wordData.partOfSpeech] || wordData.partOfSpeech;
            document.getElementById('word-example').innerHTML = wordData.exampleSentence;
            document.getElementById('example-translation').textContent = wordData.exampleTranslation;
        }
        
        // 切换单词
        function changeWord(direction) {
            const vocabulary = vocabularyData[currentLevel];
            if(!vocabulary || vocabulary.length === 0) return;
            
            currentWordIndex = (currentWordIndex + direction + vocabulary.length) % vocabulary.length;
            displayWord(vocabulary[currentWordIndex]);
        }
        
        // 切换收藏
        function toggleFavorite() {
            const word = document.getElementById('word-main').textContent;
            let favorites = JSON.parse(localStorage.getItem('tilgo-favorites') || '[]');
            
            if(favorites.includes(word)) {
                favorites = favorites.filter(w => w !== word);
                alert(languageResources[currentLang]['removed-favorite'] || 'Removed from favorites');
            } else {
                favorites.push(word);
                alert(languageResources[currentLang]['added-favorite'] || 'Added to favorites');
            }
            
            localStorage.setItem('tilgo-favorites', JSON.stringify(favorites));
        }
        
        // 修复发音功能
        function speakWord(accent) {
            const word = document.getElementById('word-main').textContent;
            speak(word, accent);
        }
        
        function speakWordForQuiz(accent) {
            const word = currentQuiz.questions[currentQuiz.currentQuestion].word;
            speak(word, accent);
        }
        
        function speak(word, accent) {
            // 检查浏览器是否支持语音合成
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                
                // 设置语言和口音
                if (accent === 'us') {
                    utterance.lang = 'en-US';
                } else {
                    utterance.lang = 'en-GB';
                }
                
                // 设置语速
                utterance.rate = 0.9;
                
                // 播放发音
                speechSynthesis.speak(utterance);
                
                // 添加反馈
                const btn = event?.currentTarget;
                if(btn) {
                    btn.style.color = '#e63946';
                    setTimeout(() => {
                        btn.style.color = '';
                    }, 500);
                }
            } else {
                alert(languageResources[currentLang]['browser-no-speech'] || 'Your browser does not support speech synthesis. Please use Chrome, Firefox, or Edge.');
            }
        }
        
        // 生成测验题目（修复了重复问题）
        function generateQuiz() {
            const vocabulary = vocabularyData[currentLevel];
            if(!vocabulary || vocabulary.length === 0) {
                alert(languageResources[currentLang]['no-vocab'] || 'No vocabulary available for this level');
                return;
            }
            
            // 重置测验状态
            currentQuiz = {
                type: currentQuizType,
                questions: [],
                currentQuestion: 0,
                score: 0,
                userAnswers: []
            };
            
            // 生成10个问题（避免重复）
            const shuffledVocab = [...vocabulary].sort(() => 0.5 - Math.random());
            const selectedWords = shuffledVocab.slice(0, 10);
            
            selectedWords.forEach(word => {
                let question;
                
                if(currentQuizType === 'multiple-choice') {
                    // 生成选择题
                    const options = [word.kazakhTranslation];
                    
                    // 添加3个干扰项（从词库中随机选择）
                    const allWords = vocabulary.filter(w => w.kazakhTranslation !== word.kazakhTranslation);
                    const shuffled = [...allWords].sort(() => 0.5 - Math.random()).slice(0, 3);
                    
                    shuffled.forEach(w => options.push(w.kazakhTranslation));
                    
                    // 随机排序
                    const shuffledOptions = [...options].sort(() => 0.5 - Math.random());
                    
                    question = {
                        word: word.word,
                        question: languageResources[currentLang]['quiz-question1'] || `Select the correct Kazakh translation for "${word.word}":`,
                        options: shuffledOptions,
                        correctAnswer: word.kazakhTranslation
                    };
                } 
                else if(currentQuizType === 'fill-in-blank') {
                    // 生成填空题
                    const sentence = word.exampleSentence;
                    const blankIndex = sentence.toLowerCase().indexOf(word.word.toLowerCase());
                    
                    if(blankIndex !== -1) {
                        const before = sentence.substring(0, blankIndex);
                        const after = sentence.substring(blankIndex + word.word.length);
                        
                        question = {
                            word: word.word,
                            sentence: before + " _____ " + after,
                            correctAnswer: word.word
                        };
                    } else {
                        // 如果单词不在例句中，使用简单句
                        question = {
                            word: word.word,
                            sentence: `I need to use the word "${word.word}" in a sentence.`,
                            correctAnswer: word.word
                        };
                    }
                } 
                else if(currentQuizType === 'spelling') {
                    // 生成拼写题
                    question = {
                        word: word.word,
                        correctAnswer: word.word
                    };
                }
                
                currentQuiz.questions.push(question);
            });
            
            // 显示第一个问题
            displayQuizQuestion();
        }
        
        // 显示测验题目
        function displayQuizQuestion() {
            const question = currentQuiz.questions[currentQuiz.currentQuestion];
            
            if(!question) return;
            
            document.getElementById('quiz-question').textContent = question.question || question.sentence;
            document.getElementById('current-question').textContent = currentQuiz.currentQuestion + 1;
            document.getElementById('total-questions').textContent = currentQuiz.questions.length;
            
            // 更新进度条
            const progress = document.querySelector('.progress');
            const progressWidth = ((currentQuiz.currentQuestion) / currentQuiz.questions.length) * 100;
            progress.style.width = `${progressWidth}%`;
            
            // 显示正确题型内容
            if(currentQuiz.type === 'multiple-choice') {
                const optionsContainer = document.getElementById('mcq-options');
                optionsContainer.innerHTML = '';
                
                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.setAttribute('data-option', String.fromCharCode(97 + index));
                    optionElement.textContent = option;
                    optionElement.onclick = () => selectOption(optionElement, String.fromCharCode(97 + index));
                    optionsContainer.appendChild(optionElement);
                });
            } 
            else if(currentQuiz.type === 'fill-in-blank') {
                document.getElementById('fill-in-sentence').textContent = question.sentence;
                document.getElementById('fill-in-answer').value = '';
            } 
            else if(currentQuiz.type === 'spelling') {
                // 清空输入框
                document.getElementById('spelling-answer').value = '';
            }
        }
        
        // 选择选项
        function selectOption(element, option) {
            // 移除所有选项的选中状态
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // 添加选中状态
            element.classList.add('selected');
            currentQuiz.userAnswers[currentQuiz.currentQuestion] = option;
        }
        
        // 提交测验答案
        function submitQuizAnswer() {
            const question = currentQuiz.questions[currentQuiz.currentQuestion];
            let isCorrect = false;
            let userAnswer = '';
            
            if(currentQuiz.type === 'multiple-choice') {
                const selected = document.querySelector('.option.selected');
                if(!selected) {
                    alert(languageResources[currentLang]['select-answer'] || 'Please select an answer!');
                    return;
                }
                
                userAnswer = selected.textContent;
                isCorrect = userAnswer === question.correctAnswer;
            } 
            else if(currentQuiz.type === 'fill-in-blank') {
                userAnswer = document.getElementById('fill-in-answer').value.trim().toLowerCase();
                isCorrect = userAnswer === question.correctAnswer.toLowerCase();
            } 
            else if(currentQuiz.type === 'spelling') {
                userAnswer = document.getElementById('spelling-answer').value.trim().toLowerCase();
                isCorrect = userAnswer === question.correctAnswer.toLowerCase();
            }
            
            // 更新分数
            if(isCorrect) {
                currentQuiz.score++;
                alert(`${languageResources[currentLang]['correct'] || 'Correct!'}\n\n${languageResources[currentLang]['correct-answer'] || 'Correct answer: '} ${question.correctAnswer}`);
            } else {
                // 添加到错题本
                const word = vocabularyData[currentLevel].find(w => w.word === question.word);
                if(word) {
                    const existingMistake = mistakes.find(m => m.word === word.word);
                    if(!existingMistake) {
                        mistakes.push({
                            word: word.word,
                            translation: word.kazakhTranslation,
                            example: word.exampleSentence,
                            exampleTranslation: word.exampleTranslation,
                            timestamp: new Date()
                        });
                        saveMistakes();
                    }
                }
                
                alert(`${languageResources[currentLang]['incorrect'] || 'Incorrect!'}\n\n${languageResources[currentLang]['correct-answer'] || 'Correct answer: '} ${question.correctAnswer}`);
            }
            
            // 移动到下一题或结束
            currentQuiz.currentQuestion++;
            
            if(currentQuiz.currentQuestion >= currentQuiz.questions.length) {
                // 测验结束
                alert(`${languageResources[currentLang]['quiz-completed'] || 'Quiz completed!'}\n\n${languageResources[currentLang]['score'] || 'Score'}: ${currentQuiz.score}/${currentQuiz.questions.length}`);
                
                // 更新错题本UI
                updateMistakesUI();
                
                // 返回学习区域
                document.getElementById('quiz-section').style.display = 'none';
                document.getElementById('learning-section').style.display = 'block';
            } else {
                // 显示下一题
                displayQuizQuestion();
            }
        }
        
        // 开始测验
        document.getElementById('view-quiz').addEventListener('click', function() {
            // 生成测验
            generateQuiz();
            
            // 显示测验区域
            document.getElementById('learning-section').style.display = 'none';
            document.getElementById('quiz-section').style.display = 'block';
            document.getElementById('mistakes-section').style.display = 'none';
            
            // 滚动到顶部
            window.scrollTo({ 
                top: document.getElementById('quiz-section').offsetTop - 20, 
                behavior: 'smooth' 
            });
        });
        
        // 更新错题本标题
        function updateMistakesTitle() {
            const title = document.querySelector('.mistakes-header h2');
            title.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${languageResources[currentLang]['mistakes-title'].replace('(0)', `(${mistakes.length})`)}`;
        }
        
        // 保存错题到本地存储
        function saveMistakes() {
            localStorage.setItem('tilgo-mistakes', JSON.stringify(mistakes));
            updateMistakesUI();
        }
        
        // 加载错题
        function loadMistakes() {
            const savedMistakes = localStorage.getItem('tilgo-mistakes');
            if(savedMistakes) {
                mistakes = JSON.parse(savedMistakes);
                updateMistakesUI();
            }
        }
        
        // 更新错题本UI
        function updateMistakesUI() {
            const mistakesList = document.getElementById('mistakes-list');
            const reviewBtn = document.getElementById('review-mistakes-btn');
            
            if(mistakes.length === 0) {
                mistakesList.innerHTML = `
                    <div class="empty-mistakes" style="text-align:center; padding:40px 0; color:#6c757d;">
                        <i class="fas fa-check-circle" style="font-size:3rem; margin-bottom:15px; color:#4ade80;"></i>
                        <h3>${languageResources[currentLang]['no-mistakes'] || 'No mistakes yet!'}</h3>
                        <p>${languageResources[currentLang]['keep-learning'] || 'Keep learning to build your mistakes list'}</p>
                    </div>
                `;
                reviewBtn.style.display = 'none';
            } else {
                mistakesList.innerHTML = '';
                
                mistakes.forEach((mistake, index) => {
                    const mistakeElement = document.createElement('div');
                    mistakeElement.className = 'mistake-item';
                    
                    mistakeElement.innerHTML = `
                        <div>
                            <div class="mistake-word">${mistake.word}</div>
                            <div class="mistake-translation">${mistake.translation} (Kazakh)</div>
                        </div>
                        <div class="mistake-actions">
                            <button class="action-btn" title="${languageResources[currentLang]['review'] || 'Review'}" onclick="reviewMistake(${index})">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            <button class="action-btn" title="${languageResources[currentLang]['delete'] || 'Delete'}" onclick="deleteMistake(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    
                    mistakesList.appendChild(mistakeElement);
                });
                
                reviewBtn.style.display = 'block';
                updateMistakesTitle();
            }
        }
        
        // 删除错题
        function deleteMistake(index) {
            if(confirm(languageResources[currentLang]['confirm-delete'] || 'Are you sure you want to delete this mistake?')) {
                mistakes.splice(index, 1);
                saveMistakes();
            }
        }
        
        // 复习错题
        function reviewMistake(index) {
            const mistake = mistakes[index];
            const vocabulary = vocabularyData[currentLevel];
            const wordData = vocabulary.find(w => w.word === mistake.word);
            
            if(wordData) {
                document.getElementById('vocabulary-section').style.display = 'none';
                document.getElementById('quiz-section').style.display = 'none';
                document.getElementById('mistakes-section').style.display = 'none';
                document.getElementById('learning-section').style.display = 'block';
                
                displayWord(wordData);
                currentWordIndex = vocabulary.indexOf(wordData);
                
                // 滚动到顶部
                window.scrollTo({ 
                    top: document.getElementById('learning-section').offsetTop - 20, 
                    behavior: 'smooth' 
                });
            }
        }
        
        // 开始错题复习
        function startMistakesReview() {
            if(mistakes.length === 0) {
                alert(languageResources[currentLang]['no-mistakes-to-review'] || 'No mistakes to review');
                return;
            }
            
            // 创建错题测验
            currentQuiz = {
                type: 'multiple-choice',
                questions: [],
                currentQuestion: 0,
                score: 0,
                userAnswers: []
            };
            
            mistakes.forEach(mistake => {
                const vocabulary = vocabularyData[currentLevel];
                const wordData = vocabulary.find(w => w.word === mistake.word);
                
                if(wordData) {
                    // 生成选择题
                    const options = [wordData.kazakhTranslation];
                    
                    // 添加3个干扰项
                    const allWords = vocabulary.filter(w => w.kazakhTranslation !== wordData.kazakhTranslation);
                    const shuffled = [...allWords].sort(() => 0.5 - Math.random()).slice(0, 3);
                    
                    shuffled.forEach(w => options.push(w.kazakhTranslation));
                    
                    // 随机排序
                    const shuffledOptions = [...options].sort(() => 0.5 - Math.random());
                    
                    currentQuiz.questions.push({
                        word: wordData.word,
                        question: languageResources[currentLang]['quiz-question1'] || `Select the correct Kazakh translation for "${wordData.word}":`,
                        options: shuffledOptions,
                        correctAnswer: wordData.kazakhTranslation
                    });
                }
            });
            
            // 显示测验区域
            document.getElementById('learning-section').style.display = 'none';
            document.getElementById('quiz-section').style.display = 'block';
            document.getElementById('mistakes-section').style.display = 'none';
            
            // 显示第一个问题
            displayQuizQuestion();
            
            // 滚动到顶部
            window.scrollTo({ 
                top: document.getElementById('quiz-section').offsetTop - 20, 
                behavior: 'smooth' 
            });
        }
        
        // 选项选择功能
        function selectOption(element, option) {
            // 移除所有选项的选中状态
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // 添加选中状态
            element.classList.add('selected');
            currentQuiz.userAnswers[currentQuiz.currentQuestion] = option;
        }
        
        // 页面交互逻辑
        document.addEventListener('DOMContentLoaded', function() {
            // 加载错题
            loadMistakes();
            
            // 检查用户登录状态
            try {
                const auth = firebase.auth();
                auth.onAuthStateChanged((user) => {
                    if (user) {
                        // 用户已登录
                        document.querySelector('.btn-outline span').textContent = 
                            languageResources[currentLang]['logout'] || 'Logout';
                    } else {
                        // 用户未登录
                        document.querySelector('.btn-outline span').textContent = 
                            languageResources[currentLang]['login'] || 'Login';
                    }
                });
            } catch (e) {
                console.log("Firebase未初始化，跳过登录状态检查");
            }
            
            // 模式切换
            const modeButtons = document.querySelectorAll('.mode-btn');
            modeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // 更新活动模式
                    modeButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    currentMode = this.getAttribute('data-mode');
                    
                    // 显示对应内容
                    if(this.getAttribute('data-mode') === 'quiz') {
                        document.getElementById('learning-section').style.display = 'none';
                        document.getElementById('quiz-section').style.display = 'block';
                        document.getElementById('mistakes-section').style.display = 'none';
                        
                        // 如果是第一次进入测验，生成题目
                        if(currentQuiz.questions.length === 0) {
                            generateQuiz();
                        }
                    } else if(this.getAttribute('data-mode') === 'study') {
                        document.getElementById('learning-section').style.display = 'block';
                        document.getElementById('quiz-section').style.display = 'none';
                        document.getElementById('mistakes-section').style.display = 'none';
                    } else if(this.getAttribute('data-mode') === 'flashcard') {
                        document.getElementById('learning-section').style.display = 'block';
                        document.getElementById('quiz-section').style.display = 'none';
                        document.getElementById('mistakes-section').style.display = 'none';
                    } else if(this.getAttribute('data-mode') === 'writing') {
                        document.getElementById('learning-section').style.display = 'block';
                        document.getElementById('quiz-section').style.display = 'none';
                        document.getElementById('mistakes-section').style.display = 'none';
                    }
                });
            });
            
            // 开始学习按钮
            document.getElementById('start-learning').addEventListener('click', function() {
                // 默认使用高中词汇
                currentLevel = 'high';
                showVocabulary(currentLevel);
            });
        });
    </script>
</body>
</html>
